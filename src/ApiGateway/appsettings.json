{
  "Auth": {
    "Authority": "http://identity-api:8080",
    "Audience": "api-gateway"
  },
  "Kestrel": {
    "Endpoints": {
      "Http":  { "Url": "http://+:8080" },
      "Https": {
        "Url": "https://+:8443",
        "Certificate": {
          "Path":     "/certs/ums-dev.pfx",
          "Password": "devcert"
        }
      }
    }
  },
  "ReverseProxy": {
    "Routes": {
      "token-route": {
        "ClusterId": "identity-cluster",
        "Match": { "Path": "/connect/{**catch-all}" },
        "AuthorizationPolicy": "anonymous",
        "RateLimiterPolicy": "token-endpoint",
        "Transforms": [{ "PathPattern": "/connect/{**catch-all}" }]
      },
      "identity-route": {
        "ClusterId": "identity-cluster",
        "Match": { "Path": "/api/v{version:apiVersion}/identity/{**catch-all}" },
        "RateLimiterPolicy": "tenant-fixed",
        "Transforms": [{ "PathRemovePrefix": "/api/v1" }]
      },
      "academic-route": {
        "ClusterId": "academic-cluster",
        "Match": { "Path": "/api/v{version:apiVersion}/academic/{**catch-all}" },
        "RateLimiterPolicy": "tenant-fixed",
        "Transforms": [{ "PathRemovePrefix": "/api/v1" }]
      },
      "student-route": {
        "ClusterId": "student-cluster",
        "Match": { "Path": "/api/v{version:apiVersion}/students/{**catch-all}" },
        "RateLimiterPolicy": "tenant-fixed",
        "Transforms": [{ "PathRemovePrefix": "/api/v1" }]
      },
      "attendance-route": {
        "ClusterId": "attendance-cluster",
        "Match": { "Path": "/api/v{version:apiVersion}/attendance/{**catch-all}" },
        "RateLimiterPolicy": "tenant-fixed",
        "Transforms": [{ "PathRemovePrefix": "/api/v1" }]
      },
      "examination-route": {
        "ClusterId": "examination-cluster",
        "Match": { "Path": "/api/v{version:apiVersion}/examination/{**catch-all}" },
        "RateLimiterPolicy": "tenant-fixed",
        "Transforms": [{ "PathRemovePrefix": "/api/v1" }]
      },
      "fee-route": {
        "ClusterId": "fee-cluster",
        "Match": { "Path": "/api/v{version:apiVersion}/fees/{**catch-all}" },
        "RateLimiterPolicy": "tenant-fixed",
        "Transforms": [{ "PathRemovePrefix": "/api/v1" }]
      },
      "notification-route": {
        "ClusterId": "notification-cluster",
        "Match": { "Path": "/api/v{version:apiVersion}/notifications/{**catch-all}" },
        "RateLimiterPolicy": "tenant-fixed",
        "Transforms": [{ "PathRemovePrefix": "/api/v1" }]
      },
      "faculty-route": {
        "ClusterId": "faculty-cluster",
        "Match": { "Path": "/api/v{version:apiVersion}/faculty/{**catch-all}" },
        "RateLimiterPolicy": "tenant-fixed",
        "Transforms": [{ "PathRemovePrefix": "/api/v1" }]
      },
      "hostel-route": {
        "ClusterId": "hostel-cluster",
        "Match": { "Path": "/api/v{version:apiVersion}/hostel/{**catch-all}" },
        "RateLimiterPolicy": "tenant-fixed",
        "Transforms": [{ "PathRemovePrefix": "/api/v1" }]
      },
      "mobile-route": {
        "ClusterId": "bff-cluster",
        "Match": { "Path": "/api/mobile/{**catch-all}" },
        "RateLimiterPolicy": "tenant-fixed"
      }
    },
    "Clusters": {
      "identity-cluster":     { "Destinations": { "default": { "Address": "http://identity-api:8080"     } } },
      "academic-cluster":     { "Destinations": { "default": { "Address": "http://academic-api:8080"     } } },
      "student-cluster":      { "Destinations": { "default": { "Address": "http://student-api:8080"      } } },
      "attendance-cluster":   { "Destinations": { "default": { "Address": "http://attendance-api:8080"   } } },
      "examination-cluster":  { "Destinations": { "default": { "Address": "http://examination-api:8080"  } } },
      "fee-cluster":          { "Destinations": { "default": { "Address": "http://fee-api:8080"          } } },
      "notification-cluster": { "Destinations": { "default": { "Address": "http://notification-api:8080" } } },
      "faculty-cluster":      { "Destinations": { "default": { "Address": "http://faculty-api:8080"      } } },
      "hostel-cluster":       { "Destinations": { "default": { "Address": "http://hostel-api:8080"       } } },
      "bff-cluster":          { "Destinations": { "default": { "Address": "http://bff:8080"              } } }
    }
  },
  "Serilog": {
    "MinimumLevel": {
      "Default": "Information",
      "Override": { "Microsoft": "Warning", "System": "Warning" }
    }
  }
}
